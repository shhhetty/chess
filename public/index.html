<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Chess & Chat</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-dark text-white">

    <!-- LANDING PAGE -->
    <div id="landing-page" class="container h-100 d-flex flex-column justify-content-center align-items-center">
        <h1 class="mb-5 display-4 fw-bold">Video Chess</h1>
        
        <div class="card bg-secondary text-white p-4 mb-4" style="width: 100%; max-width: 400px;">
            <h4 class="mb-3">Create New Game</h4>
            <label class="form-label">Time Control</label>
            <select id="time-control" class="form-select mb-3">
                <option value="1">1 Minute (Bullet)</option>
                <option value="3">3 Minutes (Blitz)</option>
                <option value="5">5 Minutes (Blitz)</option>
                <option value="10" selected>10 Minutes (Rapid)</option>
                <option value="30">30 Minutes (Classical)</option>
                <option value="0">Unlimited</option>
            </select>
            <button id="btn-create" class="btn btn-primary w-100">Create & Play</button>
        </div>

        <div class="text-center mb-3">OR</div>

        <div class="card bg-secondary text-white p-4" style="width: 100%; max-width: 400px;">
            <h4 class="mb-3">Join a Friend</h4>
            <input type="text" id="join-room-code" class="form-control mb-3" placeholder="Enter Room Code">
            <button id="btn-join" class="btn btn-success w-100">Join Game</button>
        </div>
    </div>

    <!-- GAME PAGE (Hidden by default) -->
    <div id="game-page" class="d-none container-fluid p-0 h-100 flex-column">
        
        <!-- Video Header -->
        <div id="video-container" class="bg-black position-relative">
            <div class="video-wrapper">
                <video id="remote-video" autoplay playsinline></video>
                <div id="video-placeholder">Friend's Video</div>
            </div>
            
            <div class="local-wrapper">
                <video id="local-video" autoplay playsinline muted></video>
            </div>

            <!-- Media Controls -->
            <div class="media-controls">
                <button id="btn-toggle-mic" class="btn btn-dark rounded-circle"><i class="fa fa-microphone"></i></button>
                <button id="btn-toggle-video" class="btn btn-dark rounded-circle"><i class="fa fa-video"></i></button>
            </div>

            <div id="status-msg" class="badge bg-warning text-dark position-absolute top-0 start-50 translate-middle-x mt-2">Waiting for friend...</div>
        </div>

        <!-- Timers & Board -->
        <div class="flex-grow-1 d-flex flex-column bg-secondary">
            
            <!-- Opponent Info -->
            <div class="d-flex justify-content-between px-3 py-2 align-items-center">
                <span>Opponent</span>
                <div id="timer-opponent" class="timer-box bg-dark px-3 py-1 rounded fw-bold">10:00</div>
            </div>

            <!-- The Board -->
            <div class="d-flex justify-content-center align-items-center flex-grow-1 position-relative">
                <div id="myBoard" style="width: 100%; max-width: 600px;"></div>
            </div>

            <!-- My Info -->
            <div class="d-flex justify-content-between px-3 py-2 align-items-center bg-dark bg-opacity-25">
                <span>You</span>
                <div id="timer-self" class="timer-box bg-dark px-3 py-1 rounded fw-bold">10:00</div>
            </div>
        </div>
        
        <!-- Footer / Room Info -->
        <div class="p-2 bg-dark text-center d-flex justify-content-between align-items-center">
            <span id="display-room-code" class="small text-muted"></span>
            <button id="btn-copy" class="btn btn-outline-light btn-sm">Copy Code</button>
        </div>
    </div>

    <!-- Libraries -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
